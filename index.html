<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Raven's List</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Estilos básicos para a barra de usuário logado */
        .user-welcome-container {
            display: none; /* Escondido por padrão */
            align-items: center;
            padding: 0 15px;
            color: #ccc;
            font-size: 0.9em;
        }
        .user-name {
            font-weight: bold;
            color: #fff;
            margin-right: 15px;
        }
        .btn.logout {
            margin-left: 10px;
            white-space: nowrap; /* Evita quebra de linha no botão */
            padding: 8px 15px;
        }
        /* Garantir que os botões Login/Cadastro estejam visíveis/ocultos conforme o JS */
        .login, .signup {
            display: inline-block; /* Valor padrão para deslogado */
        }
        
        /* Estilização para o ícone do footer */
        .main-footer .social-links a {
            font-size: 24px; /* Tamanho do ícone */
            color: #fff; /* Cor do ícone */
            margin: 0 5px;
            transition: color 0.3s;
        }
        .main-footer .social-links a:hover {
            color: var(--color-red-card, #ff6b6b); /* Cor ao passar o mouse */
        }
    </style>
</head>
<body>

    <header class="navbar">
        <div class="logo-container">
            <a href="index.html" title="Ir para a página inicial">
                <img src="images/ravens_list.png" alt="The Raven's List Logo" class="logo-img"> 
            </a>
        </div>
        <nav class="nav-links">
            <a href="eventos.html" class="nav-item" id="navEventos">Eventos</a>
            <a href="#" class="nav-item">Comunidade</a>
            <a href="https://moi-meme-moitie.com/" class="nav-item" target="_blank">Roupas</a>
            <a href="https://github.com/styxvoid" class="nav-item">Contate-nos</a>
            
            <a href="login.html" class="btn login">Login</a>
            <a href="cadastro.html" class="btn signup">Cadastre-se</a>

            <div class="user-welcome-container" id="welcomeContainer">
                <span id="welcomeText"></span>
                <button class="btn logout" id="logoutBtn">Sair da Conta</button>
            </div>
        </nav>
    </header>

    <main>
        <section class="hero-section">
            <div class="hero-banner-image-container">
                <img src="images/banner ravens list.png" alt="Banner The Raven's List" class="hero-banner-image">
            </div>
        </section>

        <section class="events-intro">
            <p class="intro-text">
                Sua plataforma para divulgação e venda de ingressos para seus eventos
            </p>
            <h3 class="intro-subtitle">
                Principais eventos:
            </h3>
        </section>

        <section class="events-list">
            
            <div class="event-link-wrapper" id="bioDementiaCard" data-event-name="Bio Dementia" data-link="https://www.sympla.com.br/evento/bio-dementia/2046255">
                <div class="event-card">
                    <div class="event-image-container">
                        <img src="images/bloodrock_cover.jpg" alt="Capa Bio Dementia" class="card-cover-image">
                    </div>
                    
                    <div class="event-details-content">
                        <h2 class="event-title">Bio Dementia</h2>
                        <div class="event-icon-info">
                            <div class="event-icon">
                                <img src="images/bloodrock.jpg" alt="Ícone Bloodrock Bar" class="icon-img">
                            </div>
                            <p class="event-venue">Bloodrock Bar</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="event-link-wrapper" id="vampiresNightCard" data-event-name="Vampire's Night">
                <div class="event-card">
                    <div class="event-image-container">
                        <img src="images/vampires_night_cover.jpg" alt="Capa Vampire's Night" class="card-cover-image">
                    </div>
                    
                    <div class="event-details-content">
                        <h2 class="event-title">Vampire's Night</h2>
                        <div class="event-icon-info">
                            <div class="event-icon">
                                <img src="images/tork.png" alt="Ícone Tork n' Roll" class="icon-img">
                            </div>
                            <p class="event-venue">Tork n' Roll</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="event-link-wrapper" id="noirFestCard" data-event-name="Noir Fest">
                <div class="event-card">
                    <div class="event-image-container">
                        <img src="images/noir_fest_cover.jpg" alt="Capa Noir Fest" class="card-cover-image">
                    </div>
                    
                    <div class="event-details-content">
                        <h2 class="event-title">Noir Fest</h2>
                        <div class="event-icon-info">
                            <div class="event-icon">
                                <img src="images/jokerspub.jpg" alt="Ícone Jokers Pub" class="icon-img">
                            </div>
                            <p class="event-venue">Jokers Pub</p>
                        </div>
                    </div>
                </div>
            </div>
            
        </section>

    </main>    
    <footer class="main-footer">
        <div class="footer-content">
            <div class="footer-section contact-links">
                <div class="logo-container">
                    <a href="index.html" title="Ir para a página inicial">
                        <img src="images/ravens_list.png" alt="The Raven's List Logo" class="logo-img"> 
                    </a>
                </div>
                <div class="social-links">
                    <a href="#" aria-label="X (Twitter)"><i class="fab fa-twitter"></i></a>
                    <a href="https://www.youtube.com/watch?v=KzHpUA9y5Ec" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                    <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                    <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
                </div>
            </div>
            <div class="footer-section">
                <h4 class="footer-title">Contato</h4>
                <ul class="footer-links">
                    <li><a href="https://github.com/Rhuuuyyyy">Trabalhe conosco</a></li>
                    <li><a href="https://github.com/AugustoNeon">Parcerias</a></li>
                    <li><a href="eventos.html">Eventos</a></li>
                    <li><a href="https://moi-meme-moitie.com">Loja de Roupa</a></li>
                </ul>
            </div>
        </div>
    </footer>

    <script>
        // --- 1. Lógica da Navbar e Visibilidade Condicional ---
        
        const userEmail = localStorage.getItem('userEmail');
        const userType = localStorage.getItem('userType');
        const isLoggedIn = !!userEmail; // Verifica se o email existe
        
        const loginBtn = document.querySelector('.login');
        const signupBtn = document.querySelector('.signup');
        const welcomeContainer = document.getElementById('welcomeContainer');
        const welcomeText = document.getElementById('welcomeText');
        const logoutBtn = document.getElementById('logoutBtn');
        
        // Elementos condicionalmente visíveis (Eventos)
        const navEventos = document.getElementById('navEventos');
        const footerEventosLi = document.getElementById('footerEventosLi');


        // LÓGICA DE EXIBIÇÃO DA NAVBAR E FOOTER
        if (isLoggedIn) {
            // 1. Esconde Login/Cadastro e exibe Boas-vindas
            loginBtn.style.display = 'none';
            signupBtn.style.display = 'none';
            welcomeContainer.style.display = 'flex';
            
            // 2. Monta a mensagem de boas-vindas
            let username = 'Usuário';
            if (userEmail) {
                // Pega o nome antes do @ e capitaliza
                username = userEmail.split('@')[0];
                username = username.charAt(0).toUpperCase() + username.slice(1);
            }
            welcomeText.innerHTML = `Bem-vindo(a), <span class="user-name">${username}</span>!`;
            
            // 3. Controla a visibilidade do link 'Eventos'
            if (userType !== 'funcionario') {
                // Cliente ou tipo desconhecido: Oculta Eventos
                if (navEventos) navEventos.style.display = 'none';
                if (footerEventosLi) footerEventosLi.style.display = 'none';
            } else {
                // Funcionário: Exibe Eventos
                if (navEventos) navEventos.style.display = 'inline-block';
                if (footerEventosLi) footerEventosLi.style.display = 'list-item';
            }
            
        } else {
            // Deslogado: Exibe Login/Cadastro e esconde Boas-vindas
            loginBtn.style.display = 'inline-block';
            signupBtn.style.display = 'inline-block';
            welcomeContainer.style.display = 'none';
            
            // Deslogado: Oculta Eventos (pois é restrito a funcionários)
            if (navEventos) navEventos.style.display = 'none';
            if (footerEventosLi) footerEventosLi.style.display = 'none';
        }

        // Lógica de Logout: Limpa o LocalStorage e redireciona
        logoutBtn.addEventListener('click', () => {
            localStorage.removeItem('userEmail');
            localStorage.removeItem('userType');
            alert('Você foi desconectado. Redirecionando...');
            window.location.href = 'index.html'; // Recarrega o index para refletir o estado deslogado
        });

        // --- 2. Lógica dos Cards (Redirecionamento) ---
        
        // Card 1: Bio Dementia -> Sympla (Link externo)
        const bioDementiaCard = document.getElementById('bioDementiaCard');
        const bioDementiaLink = bioDementiaCard.getAttribute('data-link');

        if (bioDementiaCard) {
            bioDementiaCard.addEventListener('click', () => {
                window.open(bioDementiaLink, '_blank');
            });
        }

        // Cards 2 e 3: Outros eventos -> Eventos.html
        const vampiresNightCard = document.getElementById('vampiresNightCard');
        const noirFestCard = document.getElementById('noirFestCard');

        if (vampiresNightCard) {
            vampiresNightCard.addEventListener('click', () => {
                window.location.href = 'eventos.html';
            });
        }

        if (noirFestCard) {
            noirFestCard.addEventListener('click', () => {
                window.location.href = 'eventos.html';
            });
        }
        
    </script>
</body>
</html>